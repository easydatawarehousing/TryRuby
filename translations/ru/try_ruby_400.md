---
lang:   RU
title:  Все вместе
answer: ^4$
ok:     Ага, Шекспир написал 4 пьесы в 1591
error:  Ответ должен быть 4. Проверьте аргумент метода count_plays
load:   prev
---

Теперь предположим, что мы хотим знать имена и количество пьес, написанных
Шекспиром в течение определенного года.

Ruby позволяет нам выбирать значения из хеша. Метод __select__ использует блок,
который позволяет нам определить, что выбрать и возвращает найденное.

Затем мы можем использовать результаты, возвращаемые __select__ в методе
__each__, как и раньше, просто добавляя его после блока выбора. Это еще один
пример цепочки методов, который мы видели ранее, когда делали стихотворение
задом наперед.

Я подготовил метод __count\_plays__ для вас. Посмотрим, сможете ли вы посчитать
количество пьес, написанных Шекспиром в 1591:

    def count_plays(year)
      s = get_shakey
      
      s["William Shakespeare"]
        .select { |k, v|
          v["finished"] == year
        }.each { |key, val|
          puts val["title"]
        }.count
    end
    
    puts count_plays(0)

Вы заметили, что я добавил метод count в самом конце метода each. Так мы
получим возвращаемое значение метода __count\_plays__.

Есть и другой способ выстраивания цепочки. Видите одинокую строчку __s =
get_shakey__? Вы можете добавить __["William Shakespeare"].select { |k, v|__ в
конец get_shakey (точка не нужна в этом случае).
